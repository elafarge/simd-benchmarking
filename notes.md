Compared performance:

Naive realloc: 787687µs

Vectorized naive realloc: 242731µs

Realloc with a memcpy all the time: 17286µs
